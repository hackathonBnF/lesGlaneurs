<html>
	<head>
		<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='momentum.css') }}">
        <script src="{{ url_for('static', filename='jquery.min.js') }}"></script>
        <script src="{{ url_for('static', filename='jquery.jscroll.min.js') }}"></script>
	</head>
	<body>
		<div class="header">
			<span class="title">Momentum !</span>
		</div>
		<hr>
		<div class="main">
            {% for band in bands %}
            {% set outer_loop = loop %}
			<div class="band">
                {% for quote in band %}
                    {% if loop.index0 > 0 %}
                        <div class="cowords">
                            {{ word_pairs[outer_loop.index0][loop.index0 - 1][0] }}<br>
                            {{ word_pairs[outer_loop.index0][loop.index0 - 1][1] }}
                        </div>
                    {% endif %}
                    <div class="item" onmouseover="setCowords(this, 'visible');" onmouseout="setCowords(this, 'hidden');">
						<img src="{{ quote[2] }}"  height="{{ quote[3] }}" width="{{ quote[4] }}"/>
						<a href="{{ 'http://gallica.bnf.fr' ~ quote[0] }}">{{ quote[1] }}</a>
                        {% if quote[5] > 0 %}
                            <div class="annotation">Temps de lecture: {{ quote[5]|read_time }}</div>
                        {% endif %}
                    </div>
                {% endfor %}
                <a href="/next/{{ last_words[loop.index0]|quote }}">{{ last_words[loop.index0] }}</a>
            </div>
            {% endfor %}
		</div>
        <script>
            //params = { padding: -10 };
            //$('.band').each(function() { $(this).jscroll(params); });
            $('.band').jscroll({autoTriggerUntil: 50});

            function setCowords(item, vis) {
                console.log(vis);
                item.previousElementSibling.style.visibility = vis;
            }
        </script>
	</body>
</html>
